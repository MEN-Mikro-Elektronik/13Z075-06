<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>MEN - Z75 MDIS Driver - Z75 MDIS Driver: Main Page</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="Language" content="en, english">
<meta name="Copyright" content="All material copyright MEN Mikro Elektronik GmbH">
<link href="men_stylesheet.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class="left_to_right" style="padding-top: 6px; background-color: #F0F0F0; height: 110px; border-bottom: 2px solid #D1D1D2;">
	<!-- Titel -->
	<img src="menlogo.gif" alt="MEN" style="float: left; height: 103px; width: 155px; margin: 0px;"></a>
	<h1 style="margin: 0px; padding-top: 35px; padding-bottom: 0px;">Z75 MDIS Driver &nbsp; </h1>
	<h3>Z75 MDIS Driver: Main Page</h3>
</div>

<div class="left_to_right">
<!-- Hauptteil -->
	<div class="main">
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li class="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Z75 MDIS Driver Documentation</h1>
<p>
This is the documentation of the MDIS low-level driver for the 16Z075_SPEED FPGA module.<p>
The 16Z075_SPEED is a frequency counter implemented in an Chameleon FPGA. It supports the following features:<p>
<ul>
<li>measuring frequency from 30 Hz .. est. 8 MHz depending on the resolution setting</li><li>resolution (measurement time) configuration</li><li>Automated mode for frequency monitoring, reported by signals</li></ul>
<p>
<br>
 <h2><a class="anchor" name="Variants">
Variants</a></h2>
( no variants ) <br>
 <h2><a class="anchor" name="FuncDesc">
Functional Description</a></h2>
<br>
 <h3><a class="anchor" name="General">
General</a></h3>
Before the the measurement is started by the corresponding M_SetStat Z075_START_MEAS, the Resolution and the FPGA system core clock has to be set. If not default values are taken from the descriptor file.<p>
In case of the driver is running in automated mode M_SetStat Z075_AUTO_MODE the Upper/Lower Limits have to be defined and the Signals for lower/upper range violation have to be installed before the automated mode should be enabled.<p>
<br>
 <h3><a class="anchor" name="reading">
Reading Frequency</a></h3>
The application can read the measured frequency by the M_GetStat code Z075_FREQUENCY. The return value represent the frequency in Hz. If the Frequency can not be read the call will return an error. The frequency measurement is disabled by default and can be started by SetStat code Z075_START_MEAS and passing 1 as argument.<p>
<br>
 <h3><a class="anchor" name="automated">
Frequency Monitoring</a></h3>
The application can enable the automated mode of the driver, which checks the measured frequency of lower and upper range limits. If the limits a exceeded the driver will inform the application via the installed signals. By default the automated mode is disabled. It can be enabled by the corresponding SetStat code passing the time in [ms] (how often the frequency is checked) as argument.<p>
<br>
 <h2><a class="anchor" name="signals">
Signals</a></h2>
The driver can send signals to notify the application of changes on the signal lines . The signal must be activated via the Z075_SET_SIG_UPPER and Z075_SET_SIG_LOWER SetStat codes and can be cleared by SetStat codes Z075_CLR_SIG_UPPER/Z075_CLR_SIG_LOWER and passing 0 as argument.<p>
<br>
 <h2><a class="anchor" name="descriptor_entries">
Descriptor Entries</a></h2>
The low-level driver initialization routine decodes the following entries ("keys") in addition to the general descriptor keys:<p>
<table border="0" cellspacing="3" cellpadding="3">
<tr>
<td><b>Descriptor entry</b> </td><td><b>Description</b> </td><td><b>Values</b> <p>
</td></tr>
<tr>
<td>Z075_SYSCLK </td><td>System clock of the 16Z075_SPEED FPGA core </td><td>0..0xFFFFFFFF, default: 32000000  </td></tr>
<tr>
<td>Z075_RESOLUTION </td><td>Initial value for resolution setting in CTL_STS register </td><td>0..0x7, default: 0  </td></tr>
<tr>
<td>Z075_A_UPPER_LTD </td><td>Upper Limit for automated mode </td><td>0..0xFFFFFFFF, default: 0xFFFFFFFF  </td></tr>
<tr>
<td>Z075_A_LOWER_LTD </td><td>Lower Limit for automated mode </td><td>0..0xFFFFFFFF, default: 0x0  </td></tr>
</table>
<p>
<br>
 <h2><a class="anchor" name="interrupts">
Interrupts</a></h2>
The Z075_SPEED module doesn't generate any interrupts, so the driver doesn't support interrupt handling.<p>
<br>
 <h2><a class="anchor" name="api_functions">
Supported API Functions</a></h2>
<table border="0" cellspacing="3" cellpadding="3">
<tr>
<td><b>API function</b> </td><td><b>Functionality</b> </td><td><b>Corresponding low level function</b><p>
</td></tr>
<tr>
<td>M_open()</td><td>Open device</td><td><a class="el" href="z75__drv_8c.html#4c26e62eff7861a095da20427bffacac" title="Allocate and return low-level handle, initialize hardware.">Z75_Init()</a><p>
</td></tr>
<tr>
<td>M_close() </td><td>Close device  </td><td><a class="el" href="z75__drv_8c.html#e1be287ade411904c7a75cf678a2c3ac" title="De-initialize hardware and clean up memory.">Z75_Exit()</a>) </td></tr>
<tr>
<td>M_read() </td><td>not supported by driver  </td><td><a class="el" href="z75__drv_8c.html#f00624aa95721021b8afd81cb6a32e4d" title="Read a value from the device.">Z75_Read()</a> </td></tr>
<tr>
<td>M_write() </td><td>not supported by driver  </td><td><a class="el" href="z75__drv_8c.html#197269a344b8d5fcaa775183125b7314" title="Description: Write a value to the device.">Z75_Write()</a> </td></tr>
<tr>
<td>M_setstat() </td><td>Set device parameter  </td><td><a class="el" href="z75__drv_8c.html#e35e841e02f1d59660cea241413ad76c" title="Set the driver status.">Z75_SetStat()</a> </td></tr>
<tr>
<td>M_getstat() </td><td>Get device parameter  </td><td><a class="el" href="z75__drv_8c.html#526cd22586a6a92fa09d2712be9450ec" title="Get the driver status.">Z75_GetStat()</a> </td></tr>
<tr>
<td>M_getblock() </td><td>not supported by driver  </td><td><a class="el" href="z75__drv_8c.html#254631791a727dfd892a84c3d809b57a" title="Read a data block from the device.">Z75_BlockRead()</a> </td></tr>
<tr>
<td>M_setblock() </td><td>not supported by driver  </td><td><a class="el" href="z75__drv_8c.html#2a2db85991d128247c86a4e34883f03a" title="Write a data block from the device.">Z75_BlockWrite()</a> </td></tr>
<tr>
<td>M_errstringTs() </td><td>Generate error message  </td><td>- </td></tr>
</table>
<p>
<br>
 <h2><a class="anchor" name="codes">
Z75 specific Getstat/Setstat codes</a></h2>
see <a class="el" href="z75__drv_8h.html#getstat_setstat_codes">section about Getstat/Setstat codes</a><p>
<table border="0" cellspacing="3" cellpadding="3">
<tr>
<td><b>Status Code</b> </td><td><b>G/S</b> </td><td><b>Description</b> </td><td><b>Value Range</b> <p>
</td></tr>
<tr>
<td>Z075_RESOLUTION </td><td>S/G </td><td>Access the CTL_STS register to set/get the resolution </td><td>0..0x7, default: 0 <p>
</td></tr>
<tr>
<td>Z075_FREQUENCY </td><td>G </td><td>Retrieve the measured frequency or evtl. errors </td><td>0..0xFFFFFFFF <p>
</td></tr>
<tr>
<td>Z075_SET_SIG_UPPER </td><td>S </td><td>Install the signal for the automated mode, upper limit violation </td><td>0..0xFFFFFFFF <p>
</td></tr>
<tr>
<td>Z075_SET_SIG_LOWER </td><td>S </td><td>Install the signal for the automated mode, lower limit violation </td><td>0..0xFFFFFFFF <p>
</td></tr>
<tr>
<td>Z075_CLR_SIG_UPPER </td><td>S </td><td>Uninstall the signal for the automated mode, upper limit violation </td><td>0..0xFFFFFFFF <p>
</td></tr>
<tr>
<td>Z075_CLR_SIG_LOWER </td><td>S </td><td>Uninstall the signal for the automated mode, lower limit violation </td><td>0..0xFFFFFFFF <p>
</td></tr>
<tr>
<td>Z075_A_UPPER_LTD </td><td>S/G </td><td>Upper Limit for automated mode </td><td>0..0xFFFFFFFF <p>
</td></tr>
<tr>
<td>Z075_A_LOWER_LTD </td><td>S/G </td><td>Lower Limit for automated mode </td><td>0..0xFFFFFFFF <p>
</td></tr>
<tr>
<td>Z075_START_MEAS </td><td>S/G </td><td>Start/Stop measurement </td><td>0..0x1 <p>
</td></tr>
<tr>
<td>Z075_AUTO_MODE </td><td>S/G </td><td>En/Disable automate mode </td><td>0..0xFFFFFFFF <p>
</td></tr>
</table>
<p>
<br>
 <h2><a class="anchor" name="Documents">
Overview of all Documents</a></h2>
<h3><a class="anchor" name="z75_simp">
Simple example for using the driver</a></h3>
<a class="el" href="z75__simp_8c.html" title="Simple example program for the Z75 driver.">z75_simp.c</a> (see example section)<h3><a class="anchor" name="z075_speed_min">
Minimum descriptor</a></h3>
z075_speed_min.dsc demonstrates the minimum set of options necessary for using the driver.<h3><a class="anchor" name="z075_speed_max">
Maximum descriptor</a></h3>
z075_speed_max.dsc shows all possible configuration options for this driver.<h3><a class="anchor" name="z075_speed_sw_min">
Minimum descriptor (swapped variant)</a></h3>
z075_speed_sw_min.dsc demonstrates the minimum set of options necessary for using the driver.<h3><a class="anchor" name="z075_speed_sw_max">
Maximum descriptor (swapped variant)</a></h3>
z075_speed_sw_max.dsc shows all possible configuration options for this driver. </div>

	</div>
</div>

<div class="footer">
<!-- Footer -->
	<p class="footer">
	Generated for Z75 MDIS Driver using <a href="http://www.doxygen.org">doxygen</a>.<br>
	Copyright &copy; 2010 <a href="http://www.men.de">MEN Mikro Elektronik GmbH</a>. All Rights Reserved.
	</p>
</div>

</body>
</html>

